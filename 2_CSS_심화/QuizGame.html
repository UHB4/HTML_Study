<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Quiz Game</title>
    <style>
        #question {
            font-weight: bold;
        }
        div{
            margin:5px;
            padding:10px 20px;
        }
    </style>
</head>
<body>
<div id="quiz-container">
    <div id="question"></div>
    <label for="user-answer">정답을 입력하세요: </label>
    <input type="text" id="user-answer" />
    <button onclick="checkAnswer()">확인</button>
</div>

<script>
    var questionsAndAnswers = [
        { description: "커서 위치 다음칸부터 입력", answer: "a" },
        { description: "커서의 위치에 입력", answer: "i" },
        { description: "커서 위치의 한글자를 지우고 입력", answer: "s" },
        { description: "줄바꿈 후 입력모드", answer: "o" },
        { description: "커서위치의 한 행을 지우고 입력", answer: "cc" },
        { description: "왼쪽으로 이동", answer: "h" },
        { description: "오른쪽으로 이동", answer: "l" },
        { description: "아래행으로 이동", answer: "j" },
        { description: "위 행으로 이동", answer: "k" },
        { description: "커서를 줄의 처음으로 옮김(공백문자가아닌 처음으로 시작되는 문자)", answer: "^" },
        { description: "줄의 마지막으로", answer: "$" },
        { description: "한 단어 삭제", answer: "dw" },
        { description: "현재 라인의 커서 위치에서 마지막까지 삭제", answer: "shift+d" },
        { description: "되돌리기", answer: "u" },
        { description: "블록 지정", answer: "v" },
        { description: "커서를 줄의 처음으로 옮김", answer: "0" },
        { description: "다음문장의 처음으로 이동", answer: ")" },
        { description: "이전문장의 처음으로 이동", answer: "(" },
        { description: "한글자 수정", answer: "r" },
        { description: "현재 커서의 문자 삭제", answer: "x" },
    ];

    var questionIndices = [...Array(questionsAndAnswers.length).keys()];
    var incorrectQuestions = [];

    function shuffleArray(array) {
        for (var i = array.length - 1; i > 0; i--) {
            var j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // 문제 순서를 랜덤으로 섞음
    shuffleArray(questionIndices);

    function displayQuestion(questionIndex) {
        var questionContainer = document.getElementById("question");
        questionContainer.textContent = "문제: " + questionsAndAnswers[questionIndex].description;
        // 사용자가 확인할 때마다 입력창 초기화
        document.getElementById("user-answer").value = "";
    }

    function checkAnswer() {
        var userAnswer = document.getElementById("user-answer").value.trim().toLowerCase();
        var currentQuestionIndex = questionIndices.pop();

        if (userAnswer === questionsAndAnswers[currentQuestionIndex].answer) {
            alert("정답!");
        } else {
            alert("틀렸습니다. 정답은 " + questionsAndAnswers[currentQuestionIndex].answer + "입니다.");
            incorrectQuestions.push(questionsAndAnswers[currentQuestionIndex]);
        }

        if (questionIndices.length > 0) {
            displayQuestion(questionIndices[questionIndices.length - 1]);
        } else {
            showResult();
        }
    }

    function showResult() {
        var totalQuestions = questionsAndAnswers.length;
        var correctAnswers = totalQuestions - incorrectQuestions.length;
        var accuracy = (correctAnswers / totalQuestions) * 100;

        alert("====================================\n" +
            "최종 결과:\n" +
            "정답률: " + accuracy.toFixed(2) + "%");

        if (incorrectQuestions.length > 0) {
            var incorrectMessage = "\n틀린 문제 목록:\n";
            for (var i = 0; i < incorrectQuestions.length; i++) {
                incorrectMessage += incorrectQuestions[i].description + " - 정답: " + incorrectQuestions[i].answer + "\n";
            }
            alert(incorrectMessage);
        }
    }

    // Enter 키를 누르면 확인 버튼을 클릭하는 이벤트 추가
    document.getElementById("user-answer").addEventListener("keyup", function(event) {
        if (event.keyCode === 13) {
            checkAnswer();
        }
    });

    displayQuestion(questionIndices[questionIndices.length - 1]);
</script>
</body>
</html>
